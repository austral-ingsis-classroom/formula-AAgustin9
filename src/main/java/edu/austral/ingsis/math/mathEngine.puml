@startuml MathEngine

interface Function {
    double evaluate();
    String print();
    List<Variable> getVariables();
    void accept(Visitor visitor);
}

class Variable {
    private String name;
    private double value;

    // getters and setters
}

interface Operation extends Function {
    Function getLeft();
    Function getRight();
}

class Addition implements Operation {
    private Function left;
    private Function right;

    // getters and setters
}

class MathEngine {
    - List<Function> functions;

    - addFunction(Function function)

    + evaluateFunction(Function function)
    + List<Variable> getVariables(Function function)
}

interface Visitor {
    void visit(Function function);
    void visit(Operation operation);
    void visit(Addition addition);
    // Add visit methods for other operations
}

class PrintVisitor implements Visitor {
    // implementation
}

class EvaluateVisitor implements Visitor {
    // implementation
}

class ListVariablesVisitor implements Visitor {
    // implementation
}

@enduml

' La funci√≥n en si tiene que ser un composite y
' algunas operaciones como printear, resolver o
' listar variables pueden hacerse con visitors